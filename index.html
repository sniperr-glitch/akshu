<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine üíñ</title>

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Pacifico&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body,html{width:100%;height:100%;overflow:hidden}

/* ================= PAGE 1 ================= */
#page1{
  position:absolute;inset:0;
  display:flex;justify-content:center;align-items:center;
  background: radial-gradient(circle at top,#ff758c,#ff7eb3,#ffc3a0);
}

/* ================= PAGE 2 ================= */
#page2{
  position:absolute;inset:0;
  display:none;
  background:radial-gradient(circle at top,#ff5f8f,#ff8fab,#ffd6e0);
  font-family:'Pacifico',cursive;
}

/* Mailbox */
.mailbox{
  width:200px;height:200px;
  background:rgba(255,255,255,0.2);
  backdrop-filter:blur(10px);
  border-radius:20px;
  display:flex;justify-content:center;align-items:center;
  flex-direction:column;
  box-shadow:0 10px 30px rgba(0,0,0,0.3);
  cursor:pointer;
  animation:float 4s ease-in-out infinite;
}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}

/* Letter */
.letter{
  position:absolute;top:50%;left:50%;
  transform:translate(-50%,-50%) scale(0);
  background:white;border-radius:20px;
  padding:30px;text-align:center;width:320px;
  box-shadow:0 10px 30px rgba(0,0,0,0.3);
  opacity:0;transition:.7s ease;
  z-index:20;
}
.letter.show{transform:translate(-50%,-50%) scale(1);opacity:1}

/* Flowers */
.flower{
  position:absolute;top:-30px;font-size:22px;
  animation:fall linear infinite;
  z-index:1;
}
@keyframes fall{to{transform:translateY(110vh);}}

/* Hearts */
.heart{
  position:absolute;font-size:40px;
  cursor:pointer;transition:.4s ease;
  z-index:5;
}

/* Funny popup images */
.fun-img{
  position:absolute;
  width:120px;
  transform:rotate(-10deg);
  animation:popImg .4s ease;
  z-index:1000;
}
@keyframes popImg{
  from{transform:scale(.6) rotate(-10deg);opacity:0}
  to{transform:scale(1) rotate(-10deg);opacity:1}
}

/* Notification */
.notice{
  position:fixed;bottom:140px;left:50%;
  transform:translateX(-50%);
  background:white;color:#ff2e6c;
  padding:12px 22px;border-radius:25px;
  box-shadow:0 10px 25px rgba(0,0,0,.3);
  animation:pop .4s ease;
  z-index:1000;
}
@keyframes pop{
  from{transform:translateX(-50%) scale(.7);opacity:0}
  to{transform:translateX(-50%) scale(1);opacity:1}
}

/* Overlay (TEXT ALWAYS ON TOP) */
.overlay{
  position:fixed;inset:0;
  background:rgba(0,0,0,.65);
  display:none;justify-content:center;align-items:center;
  z-index:9999; /* highest */
}
.card{
  background:white;padding:25px;
  border-radius:25px;text-align:center;width:320px;
}
/* move overlays up a bit so they don't collide with nav */
.overlay .card,
.overlay .questionBox{
  margin-bottom:120px;
}
.card img{width:100%;border-radius:18px}
.card p{color:#ff2e6c;margin-top:10px}

/* Question box */
.questionBox{
  background:white;
  padding:25px;
  border-radius:25px;
  text-align:center;
  width:320px;
}
.timer{font-size:26px;color:#ff2e6c;margin-top:10px}

/* NAV BUTTONS */
.nav-btns{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  display:none; /* hidden until allowed */
  gap:12px;
  z-index:50; /* lower than overlay */
}
.nav-btns button{
  padding:12px 20px;
  border:none;
  border-radius:25px;
  cursor:pointer;
  font-family:'Pacifico',cursive;
}
.next-btn{background:#fff;color:#ff2e6c}
.no-btn{background:#ff2e6c;color:#fff}

/* Page 2 original header block (restored) */
.page2-header{
  text-align:center;
  color:white;
  padding-top:20px;
  z-index:10;
}
.page2-header h1{
  font-family:'Dancing Script',cursive;
  font-size:40px;
}
.page2-header p{opacity:.9}
</style>
</head>
<body>

<audio id="player"></audio>

<!-- PAGE 1 -->
<div id="page1">
  <div class="mailbox" id="mailbox">
    <div>üíå</div>
    <div>Click me üíñ</div>
  </div>

  <div class="letter" id="letter">
    <h2>Hey Gorgeous üòè‚ù§Ô∏è</h2>
    <p>Finally khola? Thoda aur try karna pada na üòú</p>
  </div>

  <!-- nav for page1 (hidden until letter opens) -->
  <div class="nav-btns" id="nav1">
    <button class="next-btn" id="next1">Next Page ‚û°Ô∏è</button>
    <button class="no-btn" id="no1">Nahi jana üò§</button>
  </div>
</div>

<!-- PAGE 2 -->
<div id="page2">
  <div class="page2-header" id="page2Header" style="display:none">
    <h1>Touch the hearts üòè</h1>
    <p>They‚Äôre shy‚Ä¶ but not heartless üíñ</p>
  </div>

  <!-- nav for page2 (hidden until hearts/game done) -->
  <div class="nav-btns" id="nav2">
    <button class="next-btn" id="next2">Next Page ‚û°Ô∏è</button>
    <button class="no-btn" id="no2">Nahi jana üò§</button>
  </div>
</div>

<!-- OVERLAY -->
<div class="overlay" id="overlay"></div>

<script>
/* ========== ELEMENT REFERENCES ========== */
const mailbox = document.getElementById('mailbox');
const letter = document.getElementById('letter');
const page1 = document.getElementById('page1');
const page2 = document.getElementById('page2');
const overlay = document.getElementById('overlay');
const player = document.getElementById('player');

const nav1 = document.getElementById('nav1');
const nav2 = document.getElementById('nav2');
const page2Header = document.getElementById('page2Header');
const next1 = document.getElementById('next1');
const next2 = document.getElementById('next2');
const no1 = document.getElementById('no1');
const no2 = document.getElementById('no2');

let step = 0;

/* Helpers to hide/restore navs so overlay stays clearly visible */
function hideNavs(){
  try{ nav1.style.display = 'none'; }catch(e){}
  try{ nav2.style.display = 'none'; }catch(e){}
}
function restoreNavs(){
  // show nav1 if page1 visible and letter opened
  if(page1.style.display !== 'none' && letter.classList.contains('show')){
    nav1.style.display = 'flex';
    return;
  }
  // show nav2 if page2 visible
  if(page2.style.display !== 'none'){
    nav2.style.display = 'flex';
    return;
  }
}

/* --------- PAGE 1 behavior (unchanged except showing nav1 after letter) --------- */
mailbox.onclick = () => {
  if(step === 0){
    alert("Oops‚Ä¶ thoda aur pyaar chahiye üòè");
    step++;
  } else {
    alert("Aha! Ab baat bani üòå");
    letter.classList.add('show');
    // reveal nav1 after letter opens
    setTimeout(()=>{ nav1.style.display = 'flex'; }, 700);
  }
};

/* next1: user moves to page2; nav1 hides and page2 flow starts */
next1.onclick = () => {
  nav1.style.display = 'none';
  page1.style.display = 'none';
  page2.style.display = 'block';
  startPage2();
};

/* next2: no further page, playful notice */
next2.onclick = () => {
  const n = document.createElement('div');
  n.className = 'notice';
  n.innerText = "Bas abhi aur surprises nahi üòú";
  document.body.appendChild(n);
  setTimeout(()=>n.remove(),1400);
};

/* no buttons: show unique image+text per page */
no1.onclick = ()=> showNoForPage(1);
no2.onclick = ()=> showNoForPage(2);
const funImages = [
  "images/fun1.png",
  "images/fun2.png",
  "images/fun3.png",
  "images/fun4.png",
  "images/fun5.png"
];

/* --------- PAGE 2 flow & original gameplay (kept intact) --------- */
function startPage2(){
  // show original header
  page2Header.style.display = 'block';

  // falling flowers (25 or 30 as before; keeping 25)
  for(let i=0;i<25;i++){
    const f = document.createElement('div');
    f.className = 'flower';
    f.innerHTML = 'üå∏';
    f.style.left = Math.random()*100 + '%';
    f.style.animationDuration = 6 + Math.random()*6 + 's';
    page2.appendChild(f);
  }

  // create hearts (original logic)
  createHearts();

  // show nav2 after short delay so player can interact
  setTimeout(()=>{ nav2.style.display = 'flex'; }, 3000);
}

/* notifications */
const notices = [
  "Arre slow üòå",
  "Itna easy nahi üòè",
  "Pakadne ka sapna dekho üòÇ",
  "Dil hai bhagta rahega üòé"
];
function notice(t){
  const n = document.createElement('div');
  n.className = 'notice';
  n.innerText = t;
  document.body.appendChild(n);
  setTimeout(()=>n.remove(),1400);
}

/* heartsData ‚Äî UNCHANGED from your original */
const heartsData = [
 {img:"images/p1.jpeg",text:"kon kehta hai tamatar lal hai , lal toh ye apki hirni jaise chaal hai, tabhi toh mera haal behaal haiüíò",song:"songs/song1.mp3"},
 {img:"images/p2.jpeg",text:"agr aap titanic mai hote to vo kabhi nhi dubta.. kyuki vo icerberg aapko dekhte he pighal jaate",song:"songs/song2.mp3"},,
 {special:true,song:"songs/answer-song.mp3"} // QUESTION HEART
];

function createHearts(){
  heartsData.forEach((d,i)=>{
    let tries = 0;
    const h = document.createElement('div');
    h.className = 'heart';
    h.innerHTML = '‚ù§Ô∏è';
    h.style.left = 10 + i*13 + '%';
    h.style.top = '220px';

    h.onclick = () => {
      tries++;
      notice(notices[Math.floor(Math.random()*notices.length)]);
      popFunnyImage();

      if(tries < 3){
        h.style.left = Math.random()*80 + '%';
        h.style.top  = 150 + Math.random()*300 + 'px';
      } else {
        h.remove();
        if(d.special) {
          // hide navs so overlay sits clearly
          hideNavs();
          showQuestion(d.song);
        } else {
          hideNavs();
          showCard(d);
        }
      }
    };
    page2.appendChild(h);
  });
}

/* pop funny image (moved upward a bit to avoid nav) */
function popFunnyImage(){
  const img=document.createElement("img");

  const randomImg =
    funImages[Math.floor(Math.random()*funImages.length)];

  img.src = randomImg;
  img.className = "fun-img";

  img.style.left = Math.random()*100 + "%";
  img.style.top  = 60 + Math.random()*250 + "px";

  page2.appendChild(img);

  setTimeout(()=>img.remove(),1600);
}

/* show card (overlay) */
function showCard(d){
  hideNavs();
  overlay.innerHTML = `
    <div class="card">
      <img src="${d.img}">
      <p>${d.text}</p>
    </div>`;
  overlay.style.display = 'flex';
  player.src = d.song;
  player.play();
}

/* show question (overlay + timer) */
function showQuestion(song){
  hideNavs();
  let time = 5;
  overlay.innerHTML = `
  <div class="questionBox">
    <p><b>Ek sawaal üòè</b><br>
    Tumhari mummy, papa aur angoor üçá<br>
    mein kya common hai?</p>
    <div class="timer" id="timer">${time}</div>
  </div>`;
  overlay.style.display = 'flex';

  const t = setInterval(()=>{
    time--;
    const timerEl = document.getElementById('timer');
    if(timerEl) timerEl.innerText = time;
    if(time === 0){
      clearInterval(t);
      overlay.innerHTML = `
      <div class="questionBox">
        <p><b>Answer üòåüî•</b><br>
        dono se hi nasheeli cheez banti hai</p>
      </div>`;
      player.src = song;
      player.play();
    }
  },1000);
}

/* NO button popups ‚Äî unique per page, random within that page's list */
const noDataByPage = {
  1: [
    {img:"images/no1.png", text:"How dare you press NO? üò§"},
    {img:"images/no2.png", text:"No? Are you serious? üòè"}
  ],
  2: [
    {img:"images/no3.png", text:"Abhi game chal raha tha! üòÇ"},
    {img:"images/no4.png", text:"Dil jal gaya kya? üò≠"}
  ]
};

function showNoForPage(pageIndex){
  hideNavs();
  const list = noDataByPage[pageIndex] || noDataByPage[1];
  const d = list[Math.floor(Math.random()*list.length)];
  overlay.innerHTML = `
    <div class="card">
      <img src="${d.img}">
      <p>${d.text}</p>
    </div>`;
  overlay.style.display = 'flex';
}

/* convenience wrapper: decide which page user is on */
function showNo(){
  const showingPage = (page1.style.display === 'none') ? 2 : 1;
  showNoForPage(showingPage);
}

/* close overlay: restore navs appropriately */
overlay.onclick = () => {
  overlay.style.display = 'none';
  player.pause();
  player.currentTime = 0;
  restoreNavs();
};
</script>
</body>
</html>